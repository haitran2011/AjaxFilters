(function(n, t) {
    function i(i, r) {
        var f = n(".categoryFilterPanel7Spikes .filtersGroupPanel"),
            u = {};
        return u.CategoryId = i, u.CategoryFilterItems = [], r != undefined && r.is(f) && (u.Priority = 1), f.find("[data-option-ids]").each(function() {
            var r = n(this),
                f = r.attr("data-option-ids"),
                i = {};
            i.Id = f;
            i.FilterItemState = t.getFilterItemStateBasedOnAttributes(r);
            u.CategoryFilterItems.push(i)
        }), u
    }

    function r(i, r) {
        var u = n(".categoryFilterPanel7Spikes .filtersGroupPanel"),
            f = r === "usedropdowns",
            e = f;
        u.find("[data-option-ids]").each(function() {
            var r = n(this),
                s = parseInt(r.attr("data-option-ids")) || 0,
                u = n.grep(i.CategoryFilterItems, function(n) {
                    return n.Id === s
                }),
                o;
            u.length !== 0 && (o = t.addStateClassAndAttributesToOption(r, u[0].FilterItemState, f,u[0].FilterCount), o && (e = !1))
        });
        e && u.find('[value="0"]').attr("selected", "selected")
    }
    t.prototype.buildCategoryFiltersModel = i;
    t.prototype.refreshCategoryFilters = r;
    n(document).ready(function() {
        n(".categoryFilterPanel7Spikes").find('.attribute-options-select, .checkbox-list input[type="checkbox"]').on("change", function() {
            var i = n(this),
                r = i.closest(".filtersGroupPanel"),
                u = new t;
            u.requestProductsForSelectedFilters(r, i)
        })
    })
})(jQuery, FiltersManager);